<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">

<!-- Mirrored from bayou.io/release/0.9/javadoc/bayou/tcp/TcpConnection.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Feb 2020 22:13:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Generated by javadoc (1.8.0_45) on Thu May 07 17:28:35 CDT 2015 -->
<title>TcpConnection</title>
<meta name="date" content="2015-05-07">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TcpConnection";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TcpConnection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="TcpClient.Conf.html" title="class in bayou.tcp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="TcpServer.html" title="class in bayou.tcp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html#bayou/tcp/TcpConnection.html" target="_top">Frames</a></li>
<li><a href="TcpConnection.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">bayou.tcp</div>
<h2 title="Interface TcpConnection" class="title">Interface TcpConnection</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../ssl/SslConnection.html" title="interface in bayou.ssl">SslConnection</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">TcpConnection</span></pre>
<div class="block">Non-blocking TCP connection.
 <p>
     This interface is a higher abstraction over <a href="TcpChannel.html" title="interface in bayou.tcp"><code>TcpChannel</code></a>.
     See <a href="TcpChannel2Connection.html" title="class in bayou.tcp"><code>TcpChannel2Connection</code></a> for converting a TcpChannel to TcpConnection.
 </p>
 <p>
     This interface may also represent an SSL connection, see subtype <a href="../ssl/SslConnection.html" title="interface in bayou.ssl"><code>SslConnection</code></a>.
 </p>
 <h4 id=write-queue>Write Queue</h4>
 <p>
     This connection maintains a queue of ByteBuffers to be written.
     Append a ByteBuffer to the queue by <a href="TcpConnection.html#queueWrite-java.nio.ByteBuffer-"><code>queueWrite(ByteBuffer)</code></a>.
     Queued data are not automatically written, you have to call <a href="TcpConnection.html#write--"><code>write()</code></a>.
     After write(), if <a href="TcpConnection.html#getWriteQueueSize--"><code>getWriteQueueSize()</code></a> does not reach 0,
     the connection is temporarily un-writable, and you may call <a href="TcpConnection.html#awaitWritable--"><code>awaitWritable()</code></a> before write() again.
 </p>
 <p>
     Sentinel values <a href="TcpConnection.html#TCP_FIN"><code>TCP_FIN</code></a> and <a href="../ssl/SslConnection.html#SSL_CLOSE_NOTIFY"><code>SslConnection.SSL_CLOSE_NOTIFY</code></a> can also be queued,
     each counted as 1 byte in the queue size.
 </p>
 <h4>Thread Safety</h4>
 <p>
     This class is generally not thread-safe. For example, if two threads call read() concurrently,
     the behavior is undefined, and probably disastrous.
     Usually, you'll use <a href="TcpConnection.html#getExecutor--"><code>the connection executor</code></a>
     for all connection-related tasks, and they will be executed in serialized order.
     <!--
         actually read actions can occur concurrently with write actions,
         there can be two concurrent r/w flows. but that's probably not interesting to app,
         which will serialize all actions anyway on the executor.
     -->
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#STALL">STALL</a></span></code>
<div class="block">Sentinel value for read(), meaning nothing is available for read at the moment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#TCP_FIN">TCP_FIN</a></span></code>
<div class="block">Sentinel value for read() and queueWrite(), representing TCP FIN.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<tr>
<th class="colFirst methodKind">Abstract Methods</th>
<th class="colLast"></th>
</tr>
<tr id="i0" class="altColor methodSummary">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getId--">getId</a></span>()</code>
<div class="block">Get the ID of this connection.</div>
</td>
</tr>
<tr id="i1" class="rowColor methodSummary">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getPeerHost--">getPeerHost</a></span>()</code>
<div class="block">Get the host name of the peer; or null if unknown.</div>
</td>
</tr>
<tr id="i2" class="altColor methodSummary">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getPeerIp--">getPeerIp</a></span>()</code>
<div class="block">Get the IP address of the peer.</div>
</td>
</tr>
<tr id="i3" class="rowColor methodSummary">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getPeerPort--">getPeerPort</a></span>()</code>
<div class="block">Get the TCP port of the peer.</div>
</td>
</tr>
<tr id="i4" class="altColor methodSummary">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#read--">read</a></span>()</code>
<div class="block">Read data from the peer.</div>
</td>
</tr>
<tr id="i5" class="rowColor methodSummary">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#unread-java.nio.ByteBuffer-">unread</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;bb)</code>
<div class="block">Unread data.</div>
</td>
</tr>
<tr id="i6" class="altColor methodSummary">
<td class="colFirst"><code><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#awaitReadable-boolean-">awaitReadable</a></span>(boolean&nbsp;accepting)</code>
<div class="block">Wait till this connection becomes readable.</div>
</td>
</tr>
<tr id="i7" class="rowColor methodSummary">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#queueWrite-java.nio.ByteBuffer-">queueWrite</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;bb)</code>
<div class="block">Append the ByteBuffer to the <a href="#write-queue">write queue</a>.</div>
</td>
</tr>
<tr id="i8" class="altColor methodSummary">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getWriteQueueSize--">getWriteQueueSize</a></span>()</code>
<div class="block">Get the total remaining bytes of the write queue ByteBuffers.</div>
</td>
</tr>
<tr id="i9" class="rowColor methodSummary">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#write--">write</a></span>()</code>
<div class="block">Write bytes from the head of the write queue.</div>
</td>
</tr>
<tr id="i10" class="altColor methodSummary">
<td class="colFirst"><code><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#awaitWritable--">awaitWritable</a></span>()</code>
<div class="block">Wait till this connection becomes writable.</div>
</td>
</tr>
<tr id="i11" class="rowColor methodSummary">
<td class="colFirst"><code><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#close-java.time.Duration-">close</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;drainTimeout)</code>
<div class="block">Close this connection.</div>
</td>
</tr>
<tr id="i12" class="altColor methodSummary">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent">Executor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="TcpConnection.html#getExecutor--">getExecutor</a></span>()</code>
<div class="block">Get an executor associated with this connection.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<ul class="blockList">
<li class="blockList">
<h4 id="STALL">STALL</h4>
<pre>static final&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> STALL</pre>
<div class="block">Sentinel value for read(), meaning nothing is available for read at the moment.</div>
</li>
</ul>
<ul class="blockListLast">
<li class="blockList">
<h4 id="TCP_FIN">TCP_FIN</h4>
<pre>static final&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> TCP_FIN</pre>
<div class="block">Sentinel value for read() and queueWrite(), representing TCP FIN.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<ul class="blockList">
<li class="blockList">
<h4 id="getId--">getId</h4>
<pre>long&nbsp;getId()</pre>
<div class="block">Get the ID of this connection.
 <p>
     The ID is for diagnosis only. It is unique within each server/client.
 </p></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="getPeerHost--">getPeerHost</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getPeerHost()</pre>
<div class="block">Get the host name of the peer; or null if unknown.
 <p>
     If the host name is unknown, this method does not lookup the host name from the peer IP.
 </p>
 <p>
     See <a href="TcpChannel.html#getPeerHost--"><code>TcpChannel.getPeerHost()</code></a>
 </p></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="getPeerIp--">getPeerIp</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a>&nbsp;getPeerIp()</pre>
<div class="block">Get the IP address of the peer.</div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="getPeerPort--">getPeerPort</h4>
<pre>int&nbsp;getPeerPort()</pre>
<div class="block">Get the TCP port of the peer.</div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="read--">read</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;read()
         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Read data from the peer.
 <p>
     This method returns sentinel values or some real data.
 </p>
 <ul>
     <li>
         <a href="TcpConnection.html#STALL"><code>STALL</code></a> - nothing is available for read at the moment.
         You may <a href="TcpConnection.html#awaitReadable-boolean-"><code>awaitReadable(boolean)</code></a> before read again.
     </li>
     <li>
         <a href="TcpConnection.html#TCP_FIN"><code>TCP_FIN</code></a> or <a href="../ssl/SslConnection.html#SSL_CLOSE_NOTIFY"><code>SslConnection.SSL_CLOSE_NOTIFY</code></a> - TCP FIN or SSL close-notify record is received.
         After that, read() should not be called again.
     </li>
     <li>
         A ByteBuffer containing application data.
     </li>
 </ul>
 <p>
     The caller of read() must check for the sentinel values first (using ==).
 </p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="unread-java.nio.ByteBuffer-">unread</h4>
<pre>void&nbsp;unread(<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;bb)
     throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Unread data.
 <p>
     Next read() will see the ByteBuffer bb.
 </p>
 <p>
     Only one unread is supported at a time. Two consecutive unread() calls is illegal.
 </p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code></dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="awaitReadable-boolean-">awaitReadable</h4>
<pre><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;awaitReadable(boolean&nbsp;accepting)</pre>
<div class="block">Wait till this connection becomes readable.
 <p>
     This method is typically called after a previous read() returns STALL.
 </p>
 <p>
     There can be only one pending awaitReadable action at any time.
 </p>
 <p>
     Spurious wakeup is possible - this action may succeed yet the next read() sees STALL again.
 </p>
 <p>
     See <a href="TcpChannel.html#awaitReadable-boolean-"><code>TcpChannel.awaitReadable(boolean)</code></a> for more details.
 </p></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="queueWrite-java.nio.ByteBuffer-">queueWrite</h4>
<pre>long&nbsp;queueWrite(<a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;bb)</pre>
<div class="block">Append the ByteBuffer to the <a href="#write-queue">write queue</a>.
 <p>
     The ByteBuffer is now owned by this connection. If it's from a shared/cached source,
     pass a <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true#asReadOnlyBuffer--" title="class or interface in java.nio"><code>duplicate</code></a> to this method.
 </p>
 <p>
     The ByteBuffer can be very small, e.g. "\r\n", or very large, e.g. a cached huge buffer.
 </p>
 <p>
     Sentinel values <a href="TcpConnection.html#TCP_FIN"><code>TCP_FIN</code></a> and <a href="../ssl/SslConnection.html#SSL_CLOSE_NOTIFY"><code>SslConnection.SSL_CLOSE_NOTIFY</code></a> can also be queued,
     each counted as 1 byte in the queue size. If this connection is not SSL,
     <code>queueWrite(SSL_CLOSE_NOTIFY)</code> is a no-op.
 </p>
 <p>
     Any app data must be queued before SSL_CLOSE_NOTIFY, which must be queued before TCP_FIN.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the write queue size (including the newly queued ByteBuffer)</dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="getWriteQueueSize--">getWriteQueueSize</h4>
<pre>long&nbsp;getWriteQueueSize()</pre>
<div class="block">Get the total remaining bytes of the write queue ByteBuffers.</div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="write--">write</h4>
<pre>long&nbsp;write()
    throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Write bytes from the head of the write queue.
 <p>
     When this method returns, either write queue is cleared, or send buffer is full.
 </p>
 <p>
     If <a href="TcpConnection.html#getWriteQueueSize--"><code>getWriteQueueSize()</code></a> does not decrease to 0 after write(),
     this connection is temporarily un-writable (because send-buffer is full).
     You may <a href="TcpConnection.html#awaitWritable--"><code>awaitWritable()</code></a> then try write() again.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of byte actually written</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="awaitWritable--">awaitWritable</h4>
<pre><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;awaitWritable()</pre>
<div class="block">Wait till this connection becomes writable.
 <p>
     This method is typically called after a previous write() didn't clear the write queue.
     This action will wait for more rooms in the send buffer.
 </p>
 <p>
     There can be only one pending awaitWritable action at any time.
 </p>
 <p>
     This action succeeds when this connection become writable (next write() should be able to write more bytes),
     or fails due to cancellation, channel being closed, server shutdown etc.
 </p>
 <p>
     Spurious wakeup is possible - this action may succeed yet the next write() returns 0 (no byte is written).
 </p></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="close-java.time.Duration-">close</h4>
<pre><a href="../async/Async.html" title="interface in bayou.async">Async</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;close(<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html?is-external=true" title="class or interface in java.time">Duration</a>&nbsp;drainTimeout)</pre>
<div class="block">Close this connection.
 <p>
     Data in the write queue are abandoned. The TCP connection will be closed.
 </p>
 <p>
     If `drainTimeout` is non-null and positive, we will attempt to drain the inbound
     TCP bytes (till FIN is received) before we actually close the TCP connection.
     This is to avoid the infamous TCP RST problem - if the connection is closed without
     draining the inbound, the peer may not received the data we have sent.
 </p>
 <p>
     The draining step is unnecessary if the app protocol is properly designed,
     which knows that there's no inbound data at the time of close.
 </p>
 <p>
     The draining step can also be skipped if FIN was seen in a previous read(),
     or app wants to kill the connection immediately.
 </p></div>
</li>
</ul>
<ul class="blockListLast">
<li class="blockList">
<h4 id="getExecutor--">getExecutor</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent">Executor</a>&nbsp;getExecutor()</pre>
<div class="block">Get an executor associated with this connection.
 <p>
     The executor can be used to execute non-blocking tasks related to this connection.
     Tasks will be executed sequentially in the order they are submitted.
 </p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TcpConnection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="TcpClient.Conf.html" title="class in bayou.tcp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="TcpServer.html" title="class in bayou.tcp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html#bayou/tcp/TcpConnection.html" target="_top">Frames</a></li>
<li><a href="TcpConnection.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>

<!-- Mirrored from bayou.io/release/0.9/javadoc/bayou/tcp/TcpConnection.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Feb 2020 22:13:48 GMT -->
</html>
