<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">

<!-- Mirrored from bayou.io/release/1.0/javadoc/bayou/html/HtmlBuilder.ContextParent.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Feb 2020 22:11:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Generated by javadoc (1.8.0_60) on Sat Feb 13 00:04:43 CST 2016 -->
<title>HtmlBuilder.ContextParent</title>
<meta name="date" content="2016-02-13">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HtmlBuilder.ContextParent";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HtmlBuilder.ContextParent.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="HtmlBuilder.html" title="interface in bayou.html"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HtmlComment.html" title="class in bayou.html"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html#bayou/html/HtmlBuilder.ContextParent.html" target="_top">Frames</a></li>
<li><a href="HtmlBuilder.ContextParent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">bayou.html</div>
<h2 title="Class HtmlBuilder.ContextParent" class="title">Class HtmlBuilder.ContextParent</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>bayou.html.HtmlBuilder.ContextParent</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing interface:</dt>
<dd><a href="HtmlBuilder.html" title="interface in bayou.html">HtmlBuilder</a></dd>
</dl>
<hr>
<br>
<pre>public static final class <span class="typeNameLabel">HtmlBuilder.ContextParent</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A utility class dealing with context parents.
 <p>
     The context parent is an <a href="HtmlParent.html" title="interface in bayou.html"><code>HtmlParent</code></a> which builder methods
     add pieces to. In the following example
 </p>
 <pre>
         _form( ()-&gt;{
            _input(); // add an &lt;input&gt; to the context parent
         });
 </pre>
 <p>
     when the _input() methods is invoked, the context parent is the &lt;form&gt; element.
     The _input() method creates an &lt;input&gt; element and adds it
     to the &lt;form&gt; context parent.
 </p>
 <p>
     The context parent is a thread local value, initially null.
     For conciseness, we consider null a valid context parent;
     operations on a null context parent has no effect.
     For example, adding children to a null context parent is a no-op.
 </p>
 <p>
     This class contains only static methods that builder methods use
     to operate with context parents.
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<tr>
<th class="colFirst methodKind">Static Methods</th>
<th class="colLast"></th>
</tr>
<tr id="i0" class="altColor methodSummary">
<td class="colFirst"><code><a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#get--">get</a></span>()</code>
<div class="block">Get the context parent; may return null.</div>
</td>
</tr>
<tr id="i1" class="rowColor methodSummary">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#with-bayou.html.HtmlParent-java.lang.Runnable-">with</a></span>(<a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&nbsp;parent,
    <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;code)</code>
<div class="block">Run `code` with `parent` as the context parent.</div>
</td>
</tr>
<tr id="i2" class="altColor methodSummary">
<td class="colFirst"><code>&lt;P extends <a href="HtmlPiece.html" title="interface in bayou.html">HtmlPiece</a>&gt; P</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#add-P-">add</a></span>(P&nbsp;piece)</code>
<div class="block">Add `piece` to the context parent.</div>
</td>
</tr>
<tr id="i3" class="rowColor methodSummary">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#detach-java.lang.Object...-">detach</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;args)</code>
<div class="block">Detach child pieces from the context parent.</div>
</td>
</tr>
<tr id="i4" class="altColor methodSummary">
<td class="colFirst"><code>&lt;P extends <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&gt; P</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#add-P-java.lang.Object...-">add</a></span>(P&nbsp;piece,
   <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;children)</code>
<div class="block">Add `piece` to the context parent, and add `children` to `piece`.</div>
</td>
</tr>
<tr id="i5" class="rowColor methodSummary">
<td class="colFirst"><code>&lt;P extends <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&gt; P</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#add-P-java.lang.Runnable-">add</a></span>(P&nbsp;piece,
   <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;code)</code>
<div class="block">Add `piece` to the context parent, and run `code` with `piece` as the context parent.</div>
</td>
</tr>
<tr id="i6" class="altColor methodSummary">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="HtmlBuilder.ContextParent.html#detachThenAddTo-java.lang.Object:A-bayou.html.HtmlParent-">detachThenAddTo</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;children,
               <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&nbsp;piece)</code>
<div class="block">Detach `children` from the context parent, then add `children` to `piece`.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<ul class="blockList">
<li class="blockList">
<h4 id="get--">get</h4>
<pre>public static&nbsp;<a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&nbsp;get()</pre>
<div class="block">Get the context parent; may return null.</div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="with-bayou.html.HtmlParent-java.lang.Runnable-">with</h4>
<pre>public static&nbsp;void&nbsp;with(<a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&nbsp;parent,
                        <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;code)</pre>
<div class="block">Run `code` with `parent` as the context parent.
 <p>
     When `code` is executed, it'll see `ContextParent.get()==parent`, for example
 </p>
 <pre>
             DIV div = new DIV();
             ContextParent.with(div, ()-&gt;
             {
                 assert ContextParent.get()==div;
             });
 </pre>
 <p>
     `parent` can be null, which might be useful in some cases.
 </p>
 <p>
     Example Usage:
 </p>
 <pre>
            class Foo implements HtmlParent
            {
                public Foo add(Runnable code)
                {
                    ContextParent.with(this, code);
                    return this;
                }
                ...
 </pre></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="add-P-">add</h4>
<pre>public static&nbsp;&lt;P extends <a href="HtmlPiece.html" title="interface in bayou.html">HtmlPiece</a>&gt;&nbsp;P&nbsp;add(P&nbsp;piece)</pre>
<div class="block">Add `piece` to the context parent.
 <p>
     Example Usage:
 </p>
 <pre>
     DIV _div()
     {
         return ContextParent.add(new DIV());
     }
 </pre>
 <p>
     `piece` cannot be null.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>`piece`</dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="detach-java.lang.Object...-">detach</h4>
<pre>public static&nbsp;void&nbsp;detach(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;args)</pre>
<div class="block">Detach child pieces from the context parent.
 <p>
     <em>Purpose of this method:</em> In the following example
 </p>
 <pre>
     _p( "abc", _img() );
 </pre>
 <p>
     per Java's evaluation order, the code is executed as
 </p>
 <pre>
     IMG img = _img();
     _p( "abc", img );
 </pre>
 <p>
     But _img() adds a &lt;img&gt; to the context parent, so wouldn't the above code
     build a tree like
 </p>
 <pre>
     &lt;img&gt;
     &lt;p&gt;
         abc&lt;img&gt;
     &lt;/p&gt;
 </pre>
 <p>
     which is clearly not intended by the original code?
 </p>
 <p>
     Our solution: when adding children to a piece, if they
     are at the tail of the context parent's child list, they are detached from
     the context parent first, because it is most likely that they were
     intended for the piece, not for the context parent.
 </p>
 <p>
     The specification of `detach(args)` in pseudo code:
 </p>
 <pre>
     List children = children of the context parent
     while children is not empty
         find the max i that args[i]==children.getLast()
         if not found, break
         children.removeLast()
         args = {args[0], ..., args[i-1]} // drop args[i] and the rest
 </pre>
 <p>
     It is a little complicated since `args` may contain non-HtmlPiece objects.
     <!-- or contain pieces created elsewhere. -->
     <!-- e.g.  div( "text", p(), aCachedPiece, form() ) -->
     <!-- args may contain null -->
 </p>
 <p>
     This method simply invokes <a href="HtmlParent.html#detachChildren-java.lang.Object...-"><code>HtmlParent.detachChildren(Object...)</code></a>
     which actually implements the specification.
 </p></div>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="add-P-java.lang.Object...-">add</h4>
<pre>public static&nbsp;&lt;P extends <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&gt;&nbsp;P&nbsp;add(P&nbsp;piece,
                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;children)</pre>
<div class="block">Add `piece` to the context parent, and add `children` to `piece`.
 <p>
     The `children` are first <a href="HtmlBuilder.ContextParent.html#detach-java.lang.Object...-"><code>detached</code></a> from the context parent.
     This method is equivalent to
 </p>
 <pre>
     ContextParent.detach(children);
     piece.addChildren(children);
     ContextParent.add(piece);
 </pre>
 <p>
     Example Usage:
 </p>
 <pre>
     DIV _div(Object... children)
     {
         return ContextParent.add(new DIV(), children);
     }
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>`piece`</dd>
</dl>
</li>
</ul>
<ul class="blockList">
<li class="blockList">
<h4 id="add-P-java.lang.Runnable-">add</h4>
<pre>public static&nbsp;&lt;P extends <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&gt;&nbsp;P&nbsp;add(P&nbsp;piece,
                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;code)</pre>
<div class="block">Add `piece` to the context parent, and run `code` with `piece` as the context parent.
 <p>
     This method is equivalent to
 </p>
 <pre>
     ContextParent.add(piece);
     ContextParent.with(piece, code);
 </pre>
 <p>
     Example Usage:
 </p>
 <pre>
     DIV _div(Runnable code)
     {
         return ContextParent.add(new DIV(), code);
     }
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>`piece`</dd>
</dl>
</li>
</ul>
<ul class="blockListLast">
<li class="blockList">
<h4 id="detachThenAddTo-java.lang.Object:A-bayou.html.HtmlParent-">detachThenAddTo</h4>
<pre>public static&nbsp;void&nbsp;detachThenAddTo(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;children,
                                   <a href="HtmlParent.html" title="interface in bayou.html">HtmlParent</a>&nbsp;piece)</pre>
<div class="block">Detach `children` from the context parent, then add `children` to `piece`.
 <p>
     This method is equivalent to
 </p>
 <pre>
     ContextParent.detach(children);
     piece.addChildren(children);
 </pre>
 <p>
     Note that this method does not add `piece` to the context parent -
     presumably it was already added.
 </p>
 <p>
     Example Usage:
 </p>
 <pre>
            class Foo implements HtmlParent
            {
                public Foo add(Object... children)
                {
                    ContextParent.detachThenAddTo(children, this);
                    return this;
                }
                ...
 </pre></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HtmlBuilder.ContextParent.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="HtmlBuilder.html" title="interface in bayou.html"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HtmlComment.html" title="class in bayou.html"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html#bayou/html/HtmlBuilder.ContextParent.html" target="_top">Frames</a></li>
<li><a href="HtmlBuilder.ContextParent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>

<!-- Mirrored from bayou.io/release/1.0/javadoc/bayou/html/HtmlBuilder.ContextParent.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Feb 2020 22:11:34 GMT -->
</html>
